[{"assignees":[],"body":"## Problem\n\nWhen piping golangci-lint SARIF output through fo, detection fails:\n\n```bash\ngolangci-lint run --output.sarif.path=/dev/stdout --output.text.path=/dev/null ./... 2>/dev/null | fo -format llm\n# fo: unrecognized input format (expected SARIF or go test -json)\n```\n\n## Root cause\n\ngolangci-lint v2 writes a text summary to stdout even when `--output.text.path=/dev/null`:\n\n```\n{\"version\":\"2.1.0\",...valid SARIF...}\n1 issues:\n* gocognit: 1\n```\n\nfo's `detect.Sniff` peeks 4096 bytes and calls `json.Unmarshal` on the buffer. Because the trailing text is included, Unmarshal fails (it's strict about trailing content), and fo falls through to `Unknown`.\n\n## Current workaround\n\n```bash\ngolangci-lint run --output.sarif.path=/dev/stdout --output.text.path=/dev/null ./... 2>/dev/null | head -1 | fo -format llm\n```\n\nThis works because SARIF is a single-line JSON document, and `head -1` strips the summary.\n\n## Proposed fix\n\nIn `detect.Sniff` → `isSARIF()`, use `json.NewDecoder` + `Decode` instead of `json.Unmarshal`. The decoder reads one complete JSON value and ignores trailing bytes — exactly what's needed for piped SARIF with trailing garbage.\n\nThis would also resolve #221 (SARIF reader accepts trailing garbage) since the same pattern applies to `sarif.ReadBytes`.\n\n## Related\n\n- #221 — SARIF reader accepts trailing garbage after valid JSON\n- Affects trixi `make llm` target (pipes golangci-lint SARIF through fo)","closedAt":null,"createdAt":"2026-02-27T04:34:31Z","labels":[],"number":223,"state":"OPEN","title":"golangci-lint SARIF pipe broken: text summary contaminates stdout","updatedAt":"2026-02-27T04:34:31Z"}]
